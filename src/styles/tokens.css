/* ============================================================
   PULSAR V15 — Design Tokens
   80+ CSS variables · Dark par défaut · Toggle persisté
   ============================================================ */

:root {
  /* ── Palette fondamentale ── */
  --p-black:       #0A0A0F;
  --p-dark-1:      #0E0E16;
  --p-dark-2:      #13131D;
  --p-dark-3:      #1A1A28;
  --p-dark-4:      #222233;
  --p-dark-5:      #2C2C40;
  --p-gray-1:      #3A3A50;
  --p-gray-2:      #4E4E66;
  --p-gray-3:      #6B6B85;
  --p-gray-4:      #8E8EA3;
  --p-gray-5:      #B0B0C0;
  --p-light-1:     #D0D0DD;
  --p-light-2:     #E8E8F0;
  --p-white:       #F4F4FA;

  /* ── Couleurs moteurs ── */
  --p-vps:         #6C7CFF;
  --p-vps-dim:     rgba(108, 124, 255, 0.15);
  --p-vps-glow:    rgba(108, 124, 255, 0.30);
  --p-tde:         #2FD1C8;
  --p-tde-dim:     rgba(47, 209, 200, 0.15);
  --p-tde-glow:    rgba(47, 209, 200, 0.30);
  --p-pve:         #B96BFF;
  --p-pve-dim:     rgba(185, 107, 255, 0.15);
  --p-pve-glow:    rgba(185, 107, 255, 0.30);
  --p-ewe:         #FF6B8A;
  --p-ewe-dim:     rgba(255, 107, 138, 0.15);
  --p-ewe-glow:    rgba(255, 107, 138, 0.30);
  --p-tpe:         #FFB347;
  --p-tpe-dim:     rgba(255, 179, 71, 0.15);
  --p-tpe-glow:    rgba(255, 179, 71, 0.30);

  /* ── Sémantique alertes ── */
  --p-critical:    #FF4757;
  --p-critical-bg: rgba(255, 71, 87, 0.12);
  --p-warning:     #FFA502;
  --p-warning-bg:  rgba(255, 165, 2, 0.12);
  --p-success:     #2ED573;
  --p-success-bg:  rgba(46, 213, 115, 0.12);
  --p-info:        #3B82F6;
  --p-info-bg:     rgba(59, 130, 246, 0.12);

  /* ── Typographie ── */
  --p-font-display: 'Inter', -apple-system, BlinkMacSystemFont, sans-serif;
  --p-font-body:    'Inter', -apple-system, BlinkMacSystemFont, sans-serif;
  --p-font-mono:    'JetBrains Mono', 'Fira Code', monospace;
  --p-text-xs:     0.75rem;
  --p-text-sm:     0.875rem;
  --p-text-base:   1rem;
  --p-text-lg:     1.125rem;
  --p-text-xl:     1.25rem;
  --p-text-2xl:    1.5rem;
  --p-text-3xl:    1.875rem;
  --p-text-4xl:    2.25rem;
  --p-text-5xl:    3rem;
  --p-leading-tight:   1.25;
  --p-leading-normal:  1.5;
  --p-leading-relaxed: 1.75;

  /* ── Espacement ── */
  --p-space-1:  0.25rem;
  --p-space-2:  0.5rem;
  --p-space-3:  0.75rem;
  --p-space-4:  1rem;
  --p-space-5:  1.25rem;
  --p-space-6:  1.5rem;
  --p-space-8:  2rem;
  --p-space-10: 2.5rem;
  --p-space-12: 3rem;
  --p-space-16: 4rem;
  --p-space-20: 5rem;
  --p-space-24: 6rem;

  /* ── Bordures & Rayons ── */
  --p-radius-sm:  0.375rem;
  --p-radius-md:  0.5rem;
  --p-radius-lg:  0.75rem;
  --p-radius-xl:  1rem;
  --p-radius-2xl: 1.5rem;
  --p-radius-full: 9999px;
  --p-border:     1px solid var(--p-gray-1);

  /* ── Ombres ── */
  --p-shadow-sm:  0 1px 2px rgba(0,0,0,0.3);
  --p-shadow-md:  0 4px 12px rgba(0,0,0,0.4);
  --p-shadow-lg:  0 8px 24px rgba(0,0,0,0.5);
  --p-shadow-glow-vps: 0 0 20px var(--p-vps-glow);
  --p-shadow-glow-tde: 0 0 20px var(--p-tde-glow);
  --p-shadow-glow-pve: 0 0 20px var(--p-pve-glow);
  --p-shadow-glow-ewe: 0 0 20px var(--p-ewe-glow);
  --p-shadow-glow-tpe: 0 0 20px var(--p-tpe-glow);

  /* ── Transitions ── */
  --p-ease:       cubic-bezier(0.4, 0, 0.2, 1);
  --p-duration-fast:   150ms;
  --p-duration-normal: 250ms;
  --p-duration-slow:   400ms;

  /* ── Z-index ── */
  --p-z-base:    0;
  --p-z-above:   10;
  --p-z-modal:   100;
  --p-z-toast:   200;
  --p-z-overlay: 300;
}

/* ── Thème Dark (défaut) ── */
[data-theme="dark"], :root {
  --p-bg:          var(--p-dark-1);
  --p-bg-card:     var(--p-dark-2);
  --p-bg-elevated: var(--p-dark-3);
  --p-bg-hover:    var(--p-dark-4);
  --p-bg-active:   var(--p-dark-5);
  --p-text:        var(--p-white);
  --p-text-muted:  var(--p-gray-4);
  --p-text-dim:    var(--p-gray-3);
  --p-border-color: var(--p-gray-1);
  --p-input-bg:    var(--p-dark-3);
}

/* ── Thème Light ── */
[data-theme="light"] {
  --p-bg:          #F8F9FC;
  --p-bg-card:     #FFFFFF;
  --p-bg-elevated: #F0F1F5;
  --p-bg-hover:    #E8E9EE;
  --p-bg-active:   #DDDEE5;
  --p-text:        var(--p-dark-1);
  --p-text-muted:  var(--p-gray-3);
  --p-text-dim:    var(--p-gray-2);
  --p-border-color: #D8D9E0;
  --p-input-bg:    #FFFFFF;
  --p-shadow-sm:   0 1px 2px rgba(0,0,0,0.06);
  --p-shadow-md:   0 4px 12px rgba(0,0,0,0.08);
  --p-shadow-lg:   0 8px 24px rgba(0,0,0,0.12);
}

/* ── Reset & Base ── */
*, *::before, *::after { box-sizing: border-box; margin: 0; padding: 0; }

html {
  font-family: var(--p-font-body);
  font-size: 16px;
  line-height: var(--p-leading-normal);
  -webkit-font-smoothing: antialiased;
  -moz-osx-font-smoothing: grayscale;
}

body {
  background: var(--p-bg);
  color: var(--p-text);
  min-height: 100vh;
}

/* ── Scrollbar ── */
::-webkit-scrollbar { width: 6px; height: 6px; }
::-webkit-scrollbar-track { background: transparent; }
::-webkit-scrollbar-thumb { background: var(--p-gray-2); border-radius: var(--p-radius-full); }
::-webkit-scrollbar-thumb:hover { background: var(--p-gray-3); }

/* ── Focus ── */
:focus-visible {
  outline: 2px solid var(--p-vps);
  outline-offset: 2px;
}

/* ════════════════════════════════════════════════════════════════
   ANIMATIONS — 41 @keyframes (V10 heritage + V15 additions)
   ════════════════════════════════════════════════════════════════ */

/* ── Splash ── */
@keyframes splashFadeIn {
  from { opacity: 0; transform: scale(0.9); }
  to   { opacity: 1; transform: scale(1); }
}
@keyframes splashPulse {
  0%, 100% { transform: scale(1); filter: brightness(1); }
  50%      { transform: scale(1.05); filter: brightness(1.3); }
}

/* ── Navigation ── */
@keyframes pageEnter {
  from { opacity: 0; transform: translateY(12px); }
  to   { opacity: 1; transform: translateY(0); }
}
@keyframes pageExit {
  from { opacity: 1; transform: translateY(0); }
  to   { opacity: 0; transform: translateY(-12px); }
}
@keyframes sidebarSlide {
  from { opacity: 0; transform: translateX(-20px); }
  to   { opacity: 1; transform: translateX(0); }
}
@keyframes navItemEnter {
  from { opacity: 0; transform: translateX(-8px); }
  to   { opacity: 1; transform: translateX(0); }
}

/* ── Cards ── */
@keyframes cardReveal {
  from { opacity: 0; transform: translateY(16px) scale(0.97); }
  to   { opacity: 1; transform: translateY(0) scale(1); }
}
@keyframes cardSlideLeft {
  from { opacity: 0; transform: translateX(24px); }
  to   { opacity: 1; transform: translateX(0); }
}
@keyframes cardSlideRight {
  from { opacity: 0; transform: translateX(-24px); }
  to   { opacity: 1; transform: translateX(0); }
}

/* ── Scores & Gauges ── */
@keyframes gaugeStroke {
  from { stroke-dashoffset: var(--gauge-circumference, 283); }
  to   { stroke-dashoffset: var(--gauge-target, 0); }
}
@keyframes numberPop {
  0%   { transform: scale(0.5); opacity: 0; }
  60%  { transform: scale(1.15); }
  100% { transform: scale(1); opacity: 1; }
}
@keyframes countUp {
  from { opacity: 0; transform: translateY(8px); }
  to   { opacity: 1; transform: translateY(0); }
}
@keyframes ringExpand {
  from { transform: scale(0); opacity: 0; }
  to   { transform: scale(1); opacity: 1; }
}
@keyframes progressFill {
  from { width: 0%; }
  to   { width: var(--target-width, 100%); }
}

/* ── VPS Organ ── */
@keyframes vpsBreath {
  0%, 100% { transform: scale(1); }
  50%      { transform: scale(1.02); }
}
@keyframes vpsOrganGlow {
  0%, 100% { filter: drop-shadow(0 0 4px var(--organ-color, #6C7CFF)); opacity: 0.8; }
  50%      { filter: drop-shadow(0 0 12px var(--organ-color, #6C7CFF)); opacity: 1; }
}
@keyframes vpsPulse {
  0%, 100% { transform: scale(1); }
  50%      { transform: scale(1.08); }
}

/* ── Glow ── */
@keyframes glowCyan {
  0%, 100% { box-shadow: 0 0 8px var(--p-tde-glow); }
  50%      { box-shadow: 0 0 20px var(--p-tde-glow); }
}
@keyframes glowAmber {
  0%, 100% { box-shadow: 0 0 8px var(--p-tpe-glow); }
  50%      { box-shadow: 0 0 20px var(--p-tpe-glow); }
}
@keyframes glowPulse {
  0%, 100% { box-shadow: 0 0 6px var(--glow-color, var(--p-vps-glow)); }
  50%      { box-shadow: 0 0 18px var(--glow-color, var(--p-vps-glow)); }
}
@keyframes borderGlow {
  0%, 100% { border-color: var(--glow-color, var(--p-vps)); opacity: 0.6; }
  50%      { border-color: var(--glow-color, var(--p-vps)); opacity: 1; }
}
@keyframes ambientShimmer {
  0%   { background-position: -200% 0; }
  100% { background-position: 200% 0; }
}

/* ── Feedback ── */
@keyframes fadeIn {
  from { opacity: 0; transform: translateY(8px); }
  to   { opacity: 1; transform: translateY(0); }
}
@keyframes fadeInSlow {
  from { opacity: 0; }
  to   { opacity: 1; }
}
@keyframes toastIn {
  from { opacity: 0; transform: translateY(-12px) scale(0.95); }
  to   { opacity: 1; transform: translateY(0) scale(1); }
}
@keyframes scaleIn {
  from { opacity: 0; transform: scale(0.85); }
  to   { opacity: 1; transform: scale(1); }
}
@keyframes slideIn {
  from { opacity: 0; transform: translateX(-16px); }
  to   { opacity: 1; transform: translateX(0); }
}
@keyframes expandWidth {
  from { width: 0; opacity: 0; }
  to   { width: 100%; opacity: 1; }
}
@keyframes breathe {
  0%, 100% { opacity: 0.7; }
  50%      { opacity: 1; }
}

/* ── Loading ── */
@keyframes ldBlink {
  0%, 100% { opacity: 1; }
  50%      { opacity: 0.3; }
}
@keyframes ldFadeUp {
  from { opacity: 0; transform: translateY(6px); }
  to   { opacity: 1; transform: translateY(0); }
}
@keyframes ldFloat {
  0%, 100% { transform: translateY(0); }
  50%      { transform: translateY(-4px); }
}
@keyframes ldGlow {
  0%, 100% { box-shadow: 0 0 4px rgba(108,124,255,0.3); }
  50%      { box-shadow: 0 0 12px rgba(108,124,255,0.6); }
}
@keyframes ldPulse {
  0%, 100% { transform: scale(1); opacity: 0.7; }
  50%      { transform: scale(1.05); opacity: 1; }
}
@keyframes ldScaleIn {
  from { transform: scale(0); }
  to   { transform: scale(1); }
}
@keyframes ldShimmer {
  0%   { background-position: -200% 0; }
  100% { background-position: 200% 0; }
}
@keyframes spin {
  from { transform: rotate(0deg); }
  to   { transform: rotate(360deg); }
}
@keyframes dotPulse {
  0%, 80%, 100% { transform: scale(0); }
  40%           { transform: scale(1); }
}

/* ── Onboarding ── */
@keyframes obFadeIn {
  from { opacity: 0; transform: translateY(24px); }
  to   { opacity: 1; transform: translateY(0); }
}
@keyframes msEnter {
  from { opacity: 0; transform: scale(0.9) translateY(10px); }
  to   { opacity: 1; transform: scale(1) translateY(0); }
}
@keyframes pulseAnim {
  0%, 100% { transform: scale(1); box-shadow: 0 0 0 0 var(--p-vps-glow); }
  50%      { transform: scale(1.02); box-shadow: 0 0 0 8px transparent; }
}

/* ── V15 Critical Pulse ── */
@keyframes pulse-glow {
  0%, 100% { opacity: 0.6; }
  50%      { opacity: 1; }
}
@keyframes critical-pulse {
  0%, 100% { box-shadow: 0 0 8px var(--p-critical), inset 0 0 8px rgba(255,71,87,0.1); }
  50%      { box-shadow: 0 0 24px var(--p-critical), inset 0 0 16px rgba(255,71,87,0.15); }
}
@keyframes slide-up {
  from { opacity: 0; transform: translateY(20px); }
  to   { opacity: 1; transform: translateY(0); }
}

/* ── Utility Classes ── */
.animate-in        { animation: cardReveal 0.5s var(--p-ease) both; }
.animate-fade      { animation: fadeInSlow 0.6s var(--p-ease) both; }
.animate-scale     { animation: scaleIn 0.4s var(--p-ease) both; }
.animate-slide     { animation: slideIn 0.4s var(--p-ease) both; }
.animate-splash    { animation: splashFadeIn 0.8s var(--p-ease) both; }
.animate-card      { animation: cardReveal 0.5s var(--p-ease) both; }
.animate-toast     { animation: toastIn 0.35s var(--p-ease) both; }
.animate-number    { animation: numberPop 0.4s var(--p-ease) both; }
.animate-breathe   { animation: breathe 3s ease-in-out infinite; }
.animate-glow-vps  { animation: glowPulse 2s ease-in-out infinite; --glow-color: var(--p-vps-glow); }
.animate-glow-tde  { animation: glowCyan 2s ease-in-out infinite; }
.animate-glow-pve  { animation: glowPulse 2s ease-in-out infinite; --glow-color: var(--p-pve-glow); }
.animate-glow-crit { animation: critical-pulse 1.5s ease-in-out infinite; }
.animate-spin      { animation: spin 1s linear infinite; }
.animate-shimmer   { animation: ldShimmer 2s linear infinite; background: linear-gradient(90deg, transparent 25%, var(--p-gray-1) 50%, transparent 75%); background-size: 200% 100%; }
.organ-glow        { animation: vpsOrganGlow 2.5s ease-in-out infinite; }
.organ-pulse       { animation: vpsPulse 1.2s ease-in-out infinite; }
.body-breathe      { animation: vpsBreath 4s ease-in-out infinite; }

.stagger-1 { animation-delay: 80ms; }
.stagger-2 { animation-delay: 160ms; }
.stagger-3 { animation-delay: 240ms; }
.stagger-4 { animation-delay: 320ms; }
.stagger-5 { animation-delay: 400ms; }
.stagger-6 { animation-delay: 480ms; }
.stagger-7 { animation-delay: 560ms; }
.stagger-8 { animation-delay: 640ms; }

/* ── Hover & Transition helpers ── */
.hover-lift {
  transition: transform 0.2s var(--p-ease), box-shadow 0.2s var(--p-ease);
}
.hover-lift:hover {
  transform: translateY(-2px);
  box-shadow: var(--p-shadow-lg);
}
.hover-glow {
  transition: box-shadow 0.3s var(--p-ease), border-color 0.3s var(--p-ease);
}
.hover-glow:hover {
  box-shadow: 0 0 16px var(--glow-color, var(--p-vps-glow));
}
.transition-all {
  transition: all 0.25s var(--p-ease);
}
.transition-colors {
  transition: color 0.2s, background-color 0.2s, border-color 0.2s;
}

/* ── Gauge SVG ── */
.gauge-ring {
  animation: gaugeStroke 1.2s var(--p-ease) both;
  transform-origin: center;
  transform: rotate(-90deg);
}
.gauge-ring-delayed { animation-delay: 0.3s; }

/* ── Progress bars animated ── */
.progress-fill {
  animation: progressFill 1s var(--p-ease) both;
}
.progress-fill-delayed { animation-delay: 0.2s; }

/* ════════════════════════════════════════════════════════════════
   GLASS MORPHISM & DEPTH LAYERS
   ════════════════════════════════════════════════════════════════ */
.glass {
  background: rgba(14,14,22,0.6);
  backdrop-filter: blur(12px) saturate(1.4);
  -webkit-backdrop-filter: blur(12px) saturate(1.4);
  border: 1px solid rgba(108,124,255,0.08);
}
[data-theme="light"] .glass {
  background: rgba(255,255,255,0.7);
  border: 1px solid rgba(0,0,0,0.06);
}
.glass-card {
  background: rgba(19,19,29,0.65);
  backdrop-filter: blur(16px) saturate(1.5);
  -webkit-backdrop-filter: blur(16px) saturate(1.5);
  border: 1px solid rgba(108,124,255,0.1);
  box-shadow: 0 4px 24px rgba(0,0,0,0.3), inset 0 1px 0 rgba(255,255,255,0.03);
}
[data-theme="light"] .glass-card {
  background: rgba(255,255,255,0.8);
  border: 1px solid rgba(0,0,0,0.08);
  box-shadow: 0 4px 24px rgba(0,0,0,0.06), inset 0 1px 0 rgba(255,255,255,0.5);
}

/* Gradient mesh background */
.bg-mesh {
  background:
    radial-gradient(ellipse 80% 50% at 20% 40%, rgba(108,124,255,0.06) 0%, transparent 70%),
    radial-gradient(ellipse 60% 40% at 80% 60%, rgba(185,107,255,0.04) 0%, transparent 70%),
    radial-gradient(ellipse 50% 50% at 50% 20%, rgba(47,209,200,0.03) 0%, transparent 70%);
}

/* ── Page Enter Transition ── */
.page-enter {
  animation: pageEnter 0.45s var(--p-ease) both;
}
.page-enter-stagger > * {
  animation: cardReveal 0.5s var(--p-ease) both;
}
.page-enter-stagger > *:nth-child(1) { animation-delay: 50ms; }
.page-enter-stagger > *:nth-child(2) { animation-delay: 120ms; }
.page-enter-stagger > *:nth-child(3) { animation-delay: 190ms; }
.page-enter-stagger > *:nth-child(4) { animation-delay: 260ms; }
.page-enter-stagger > *:nth-child(5) { animation-delay: 330ms; }
.page-enter-stagger > *:nth-child(6) { animation-delay: 400ms; }
.page-enter-stagger > *:nth-child(7) { animation-delay: 470ms; }
.page-enter-stagger > *:nth-child(8) { animation-delay: 540ms; }

/* ── Enhanced Hover States ── */
.hover-glow-vps:hover {
  box-shadow: 0 0 20px var(--p-vps-glow), 0 4px 16px rgba(0,0,0,0.3);
  border-color: rgba(108,124,255,0.3);
}
.hover-glow-tde:hover {
  box-shadow: 0 0 20px var(--p-tde-glow), 0 4px 16px rgba(0,0,0,0.3);
  border-color: rgba(47,209,200,0.3);
}
.hover-glow-engine:hover {
  box-shadow: 0 0 18px var(--glow-color, var(--p-vps-glow)), 0 4px 14px rgba(0,0,0,0.2);
  transform: translateY(-3px) scale(1.01);
}
.card-interactive {
  transition: transform 0.25s var(--p-ease), box-shadow 0.3s var(--p-ease), border-color 0.3s var(--p-ease);
  cursor: pointer;
}
.card-interactive:hover {
  transform: translateY(-2px);
  box-shadow: 0 8px 32px rgba(0,0,0,0.35), 0 0 0 1px rgba(108,124,255,0.12);
}
.card-interactive:active {
  transform: translateY(0px) scale(0.99);
}

/* ── Section Header ── */
.section-label {
  font-size: 10px;
  font-weight: 700;
  font-family: var(--p-font-mono);
  color: var(--p-text-dim);
  letter-spacing: 1.5px;
  text-transform: uppercase;
}

/* ── Gradient Text ── */
.text-gradient-vps {
  background: linear-gradient(135deg, var(--p-vps) 0%, #9C6CFF 100%);
  -webkit-background-clip: text;
  -webkit-text-fill-color: transparent;
  background-clip: text;
}
.text-gradient-brand {
  background: linear-gradient(135deg, var(--p-vps) 0%, var(--p-tde) 50%, var(--p-pve) 100%);
  -webkit-background-clip: text;
  -webkit-text-fill-color: transparent;
  background-clip: text;
}

/* ── Accent Line ── */
.accent-line {
  height: 2px;
  background: linear-gradient(90deg, var(--p-vps) 0%, var(--p-tde) 50%, transparent 100%);
  border-radius: 1px;
}

/* ── Dot Indicator ── */
.dot-alive {
  width: 6px; height: 6px;
  border-radius: 50%;
  background: var(--p-success);
  animation: breathe 2s ease-in-out infinite;
  box-shadow: 0 0 6px var(--p-success);
}
.dot-critical {
  width: 6px; height: 6px;
  border-radius: 50%;
  background: var(--p-critical);
  animation: breathe 1s ease-in-out infinite;
  box-shadow: 0 0 8px var(--p-critical);
}

/* ════════════════════════════════════════════════════════════════
   RESPONSIVE — Mobile First
   ════════════════════════════════════════════════════════════════ */
@media (max-width: 768px) {
  .grid-5 { grid-template-columns: repeat(2, 1fr) !important; }
  .grid-5-2 { grid-template-columns: repeat(2, 1fr) !important; }
  .grid-4 { grid-template-columns: repeat(2, 1fr) !important; }
  .grid-3 { grid-template-columns: 1fr !important; }
  .grid-2-1 { grid-template-columns: 1fr !important; }
  .hide-mobile { display: none !important; }
  .text-mobile-sm { font-size: var(--p-text-sm) !important; }
  main { padding: var(--p-space-3) !important; }

  /* Glass cards: slightly less blur on mobile for perf */
  .glass-card {
    backdrop-filter: blur(8px) saturate(1.3);
    -webkit-backdrop-filter: blur(8px) saturate(1.3);
  }

  /* Touch-friendly targets */
  .card-interactive { min-height: 44px; }

  /* Stack engine pipeline on mobile */
  .grid-5 > * { min-width: 0; }
}
@media (max-width: 480px) {
  .grid-5 { grid-template-columns: 1fr !important; }
  .grid-5-2 { grid-template-columns: 1fr !important; }
  .grid-4 { grid-template-columns: 1fr !important; }
}

/* ── Reduced Motion ── */
@media (prefers-reduced-motion: reduce) {
  *, *::before, *::after {
    animation-duration: 0.01ms !important;
    animation-iteration-count: 1 !important;
    transition-duration: 0.01ms !important;
  }
}
